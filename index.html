<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>BZuk — Visual Max • Beta Alfa</title>

<!-- Fonts & Icons -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Roboto+Mono:wght@300;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<!-- External libs (heavy): three.js, gsap, lenis, lottie-player, vanilla-tilt -->
<script src="https://unpkg.com/three@0.154.0/build/three.min.js"></script>
<script src="https://unpkg.com/three@0.154.0/examples/js/controls/OrbitControls.js"></script>
<script src="https://unpkg.com/gsap@3.12.2/dist/gsap.min.js"></script>
<script src="https://unpkg.com/gsap@3.12.2/dist/ScrollTrigger.min.js"></script>
<script src="https://unpkg.com/@studio-freight/lenis@1.0.16/dist/lenis.min.js"></script>
<script src="https://unpkg.com/vanilla-tilt@1.7.2/dist/vanilla-tilt.min.js"></script>
<script src="https://unpkg.com/@lottiefiles/lottie-player@1.5.7/dist/lottie-player.js"></script>

<style>
/* =======================================================
   BZuk — Visual Max (BR) • Single-file HTML
   Referências visuais (inspiração):
   Apple, Stripe, Awwwards, Dribbble, Behance, Webflow, Figma,
   Framer, Notion, Tesla, Nike, Spotify, GitHub, Land-book,
   Siteinspire, Lapa Ninja, Muzli, One Page Love, Stripe pages, Netflix
   ======================================================= */

/* ========== THEME (Brasil) ========== */
:root{
  --bg-900:#03060a;
  --bg-800:#071422;
  --brasil-green:#006A3A;
  --brasil-yellow:#FEDF00;
  --brasil-blue:#002776;
  --muted:#9FB0C0;
  --text:#F0FBFF;
  --glass: rgba(255,255,255,0.03);
  --card: rgba(255,255,255,0.02);
  --radius:18px;
  --shadow-strong: 0 40px 140px rgba(2,6,14,0.9);
  --ease: cubic-bezier(.22,.95,.14,1);
  --maxw:1300px;
}

/* ========== Reset ========== */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
  background: linear-gradient(180deg,var(--bg-900),var(--bg-800));
  color:var(--text); -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  -webkit-text-size-adjust:100%;
}

/* ========== Canvases ========== */
canvas#gl, canvas#particles { position:fixed; inset:0; z-index:0; pointer-events:none; }

/* ========== Layout ========== */
.container{max-width:var(--maxw);margin:0 auto;padding:26px 20px;position:relative;z-index:20}

/* ========== Header ========== */
.header{position:fixed;left:0;right:0;top:18px;z-index:120;display:flex;justify-content:center;pointer-events:none}
.topbar{width:100%;max-width:var(--maxw);display:flex;align-items:center;justify-content:space-between;padding:10px 14px;border-radius:14px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));box-shadow:0 8px 40px rgba(0,0,0,0.55);backdrop-filter: blur(10px);border:1px solid rgba(255,255,255,0.03);pointer-events:auto}
.brand{display:flex;gap:12px;align-items:center}
.logo{width:56px;height:56px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-weight:900;color:white;background:linear-gradient(135deg,var(--brasil-green),var(--brasil-blue));box-shadow:0 14px 44px rgba(0,0,0,0.6)}
.brand h1{font-size:1.05rem;margin:0}
.brand p{margin:0;font-size:0.8rem;color:var(--muted)}

/* ========== Nav ========== */
.nav{display:flex;gap:18px;align-items:center}
.nav a{position:relative;color:var(--muted);text-decoration:none;font-weight:700;padding:8px 6px;border-radius:6px;transition:transform .18s var(--ease)}
.nav a:hover{transform:translateY(-3px);color:var(--text)}
.nav a .uline{position:absolute;left:6%;right:6%;bottom:-10px;height:7px;display:flex;justify-content:center;pointer-events:none}
.nav a .bar{width:0;height:7px;border-radius:999px;background:linear-gradient(90deg,var(--brasil-green),var(--brasil-yellow),var(--brasil-blue));box-shadow:0 18px 60px rgba(0,106,58,0.10);transition:width .55s var(--ease), transform .55s var(--ease)}
.nav a:hover .bar{width:100%;transform:translateY(-2px) scale(1.02)}

/* ========== Controls & Buttons ========== */
.controls{display:flex;gap:12px;align-items:center}
.btn{position:relative;overflow:hidden;display:inline-flex;align-items:center;gap:10px;padding:12px 18px;border-radius:12px;border:0;cursor:pointer;font-weight:900;background:linear-gradient(90deg,var(--brasil-green),var(--brasil-blue));color:white;box-shadow:0 18px 60px rgba(0,0,0,0.45);transition:transform .18s var(--ease)}
.btn:hover{transform:translateY(-6px)}
.btn .flag{width:18px;height:12px;border-radius:2px;flex-shrink:0;background:linear-gradient(180deg,var(--brasil-blue),var(--brasil-green));box-shadow:0 8px 20px rgba(0,0,0,0.3)}
.btn-outline{background:transparent;border:2px solid rgba(255,255,255,0.04);color:var(--muted);padding:10px 14px;border-radius:12px}
.btn-discord{background:linear-gradient(135deg,#0066ff,#0050cc);padding:10px 14px;border-radius:12px;color:white;display:inline-flex;align-items:center;gap:10px}
.btn .shine{position:absolute;left:-50%;top:-60%;width:40%;height:200%;background:linear-gradient(120deg, rgba(255,255,255,0.14), rgba(255,255,255,0.02), rgba(255,255,255,0.08));transform:skewX(-18deg);opacity:0;transition:opacity .4s .06s, transform 1s var(--ease)}
.btn:hover .shine{opacity:1;transform:translateX(260%) skewX(-18deg)}

/* ========== Hero ========== */
.hero{min-height:92vh;display:grid;grid-template-columns:1fr 480px;gap:40px;align-items:center;padding-top:86px;padding-bottom:60px}
.hero .badge{display:inline-block;padding:8px 12px;border-radius:999px;background:linear-gradient(90deg,var(--brasil-yellow),var(--brasil-green));color:#061018;font-weight:900;box-shadow:0 18px 60px rgba(0,0,0,0.45)}
.hero h1{font-size:3.2rem;line-height:1.02;margin:18px 0 12px}
.hero h1 .neon{background:linear-gradient(90deg,var(--brasil-green),var(--brasil-yellow),var(--brasil-blue));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-size:200% 200%;animation:shift 6s linear infinite}
@keyframes shift{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
.hero p.lead{color:var(--muted);font-size:1.04rem;max-width:46ch}

/* ========== Preview Terminal ========== */
.preview{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:20px;padding:18px;border:1px solid rgba(255,255,255,0.03);box-shadow:var(--shadow-strong);min-height:320px;position:relative;overflow:hidden}
.preview .term-top{display:flex;align-items:center;gap:8px;margin-bottom:12px}
.preview pre{margin:0;font-family:'Roboto Mono', monospace;color:#CFF3FF;white-space:pre-wrap;line-height:1.6}

/* ========== Features & Cards ========== */
.features{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin-top:18px}
.feature{background:linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01));padding:20px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);transition:transform .36s var(--ease)}
.feature:hover{transform:translateY(-10px)}
.cards{display:grid;grid-template-columns:repeat(3,1fr);gap:18px;margin-top:18px}
.card{padding:18px;border-radius:14px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.0));border:1px solid rgba(255,255,255,0.03);box-shadow:0 18px 60px rgba(0,0,0,0.5)}
.code{background:#05121a;border-radius:12px;padding:18px;border:1px solid rgba(255,255,255,0.03);font-family:'Roboto Mono',monospace;color:#cfeaff}

/* ========== Footer ========== */
.footer{padding:50px 0;text-align:center;color:var(--muted)}

/* ========== Cursor CSS (advanced, Brasil tint) ========== */
/* integrated cursor (dot + ring) — responsive & accessible */
#bzuk-cursor-dot, #bzuk-cursor-ring { position: fixed; left: 0; top: 0; pointer-events: none; z-index: 9999999; transform: translate3d(-50%,-50%,0); will-change: transform, opacity; transition: opacity .18s linear; mix-blend-mode: screen; }
#bzuk-cursor-dot {
  width: 10px; height: 10px; border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.98), rgba(255,255,255,0.9) 20%, rgba(0,0,0,0.06) 60%);
  box-shadow: 0 6px 22px rgba(20,200,150,0.12), 0 0 12px rgba(255,255,255,0.06) inset;
  transform-origin: center;
  transition: transform .12s cubic-bezier(.2,.9,.2,1);
  opacity: 1;
}
#bzuk-cursor-ring {
  width: 44px; height: 44px; border-radius: 50%;
  border: 1.6px solid rgba(255,255,255,0.06);
  background: radial-gradient(circle, rgba(46,139,87,0.08), rgba(0,39,118,0.04));
  box-shadow: 0 14px 40px rgba(46,139,87,0.06), 0 0 18px rgba(0,39,118,0.03);
  transform-origin: center;
  transition: transform .22s cubic-bezier(.2,.9,.2,1), opacity .22s linear, background .25s linear;
  opacity: 0.95;
}
.bzuk-cursor--hover-ring {
  transform: translate3d(-50%,-50%,0) scale(1.65);
  background: radial-gradient(circle, rgba(254,223,0,0.12), rgba(0,106,58,0.06));
  box-shadow: 0 28px 80px rgba(254,223,0,0.10), 0 0 38px rgba(0,106,58,0.06);
  border-color: rgba(254,223,0,0.26);
}
.bzuk-cursor--hover-dot {
  transform: translate3d(-50%,-50%,0) scale(1.25);
  box-shadow: 0 10px 28px rgba(255,255,255,0.12);
}
.bzuk-cursor-pulse {
  animation: bzuk-pulse .46s cubic-bezier(.2,.9,.2,1);
}
@keyframes bzuk-pulse {
  0% { transform: translate3d(-50%,-50%,0) scale(1); opacity:1; }
  40% { transform: translate3d(-50%,-50%,0) scale(1.9); opacity:0.6; }
  100% { transform: translate3d(-50%,-50%,0) scale(2.6); opacity:0; }
}
/* hide on touch / small */
@media (pointer: coarse), (max-width:700px) {
  #bzuk-cursor-dot, #bzuk-cursor-ring { display:none !important; }
}
/* reduced motion */
@media (prefers-reduced-motion: reduce) {
  #bzuk-cursor-dot, #bzuk-cursor-ring { display:none !important; }
}

/* ========== Responsive ========== */
@media (max-width:1000px){ .hero{grid-template-columns:1fr;gap:20px} .nav{display:none} .hero h1{font-size:2rem} .preview{min-height:260px} .controls{gap:8px} .container{padding:18px} }
@media (prefers-reduced-motion:reduce){*{transition:none!important;animation:none!important}}
</style>
</head>
<body>

<!-- heavy canvases (shader + particles) -->
<canvas id="gl"></canvas>
<canvas id="particles"></canvas>

<!-- header -->
<header class="header">
  <div class="topbar container" role="navigation" aria-label="main nav">
    <div class="brand">
      <div class="logo">BZ</div>
      <div>
        <h1>BZuk <span style="font-size:0.78rem;color:var(--muted);font-weight:700">Beta Alfa</span></h1>
        <p class="kv" style="margin:0;color:var(--muted);font-weight:800">Desenvolvido por 1 pessoa • em desenvolvimento</p>
      </div>
    </div>

    <nav class="nav" aria-label="sections">
      <a href="#about">Sobre <span class="uline"><span class="bar"></span></span></a>
      <a href="#features">Funcionalidades <span class="uline"><span class="bar"></span></span></a>
      <a href="#versions">Versões <span class="uline"><span class="bar"></span></span></a>
      <a href="#example">Exemplo <span class="uline"><span class="bar"></span></span></a>
      <a href="#download">Download <span class="uline"><span class="bar"></span></span></a>
    </nav>

    <div class="controls">
      <a class="btn-discord btn" href="https://discord.gg/A3aMaYaQjh" target="_blank" rel="noopener" aria-label="Discord"><i class="fab fa-discord"></i>&nbsp;Discord</a>
      <a class="btn btn-outline" href="https://github.com/Emperordeath" target="_blank" rel="noopener" aria-label="GitHub"><i class="fab fa-github"></i>&nbsp;GitHub</a>
      <button id="heavy-toggle" class="btn" title="Modo leve/pesado">Modo leve</button>
    </div>
  </div>
</header>

<!-- main -->
<main class="container" id="top">
  <section class="hero" id="home" aria-label="hero">
    <div>
      <div class="badge">Lançamento Beta • Linux / PC</div>
      <h1><span class="neon">BZuk</span> — linguagem brasileira para prototipar rápido</h1>
      <p class="lead">Interpretador Beta Alfa com sintaxe em português. Versão atual inspirada no Python (fácil); futura versão otimizada (C++-like).</p>

      <div style="margin-top:18px;display:flex;gap:12px;flex-wrap:wrap">
        <a class="btn ripple" id="downloadBtn"><span class="flag" style="width:18px;height:12px;background:linear-gradient(180deg,var(--brasil-blue),var(--brasil-green));display:inline-block;border-radius:2px"></span> Download Linux / PC <span class="shine"></span></a>
        <a class="btn-outline ripple" href="#example" aria-label="Exemplo">Ver exemplo</a>
        <a class="btn-discord btn ripple" href="https://discord.gg/A3aMaYaQjh" target="_blank" rel="noopener" aria-label="Entrar no Discord"><i class="fab fa-discord"></i>&nbsp;Entrar no Discord</a>
      </div>

      <div class="features" style="margin-top:22px">
        <div class="feature"><strong>Sintaxe em Português</strong><div class="muted">impri(), ler=, se, repi-n</div></div>
        <div class="feature"><strong>Fácil de Aprender</strong><div class="muted">Perfeito para ensino e prototipagem</div></div>
        <div class="feature"><strong>Roadmap</strong><div class="muted">1) Python-like → 2) C++-like (após finalizar)</div></div>
      </div>
    </div>

    <aside class="preview" aria-hidden="false" data-tilt>
      <div class="term-top">
        <div class="dots"><span class="dot r"></span><span class="dot y"></span><span class="dot g"></span></div>
        <div style="margin-left:auto;color:var(--muted);font-weight:700">Terminal • BZuk</div>
      </div>
      <pre id="codeBlock" class="code">// exemplo.bz — demo
let nome = ler="Qual seu nome?"
const idade = ler="Qual sua idade?", numero
let status = "ativo"
const pais = "Brasil"

impri("nome, idade, status, pais")

rp(cidade)
impri("cidade")

se idade MN 18,
    impri("Você é maior de idade!")
senão,
    impri("Você é menor de 18!")

repi-3,
    impri("Loop rápido!")</pre>

      <div style="position:absolute;right:12px;bottom:12px;width:100px;pointer-events:none">
        <lottie-player src="https://assets5.lottiefiles.com/packages/lf20_jtbfg2nb.json" background="transparent" speed="0.9" style="width:100%;height:100%;" loop autoplay></lottie-player>
      </div>
    </aside>
  </section>

  <section id="about" style="margin-top:28px">
    <h2>Sobre</h2>
    <div style="display:flex;gap:18px;flex-wrap:wrap;margin-top:12px">
      <div style="flex:1;min-width:260px">
        <p class="muted">BZuk é uma linguagem com sintaxe em português — criada para reduzir barreiras ao aprendizado. A versão atual é interpretada e voltada para desktops (Linux/PC).</p>
      </div>
      <div style="min-width:260px"><div class="card"><h4>Resumo</h4><p class="muted">Plataforma: Linux / Windows • Versão: 1.7 Beta Alfa</p></div></div>
    </div>
  </section>

  <section id="features" style="margin-top:28px">
    <h2>Funcionalidades</h2>
    <div class="cards">
      <div class="card" data-tilt>
        <h3>Sintaxe em Português</h3>
        <p class="muted">Comandos claros e abreviações intuitivas.</p>
      </div>
      <div class="card" data-tilt>
        <h3>let / const</h3>
        <p class="muted">Mutabilidade controlada para evitar bugs.</p>
      </div>
      <div class="card" data-tilt>
        <h3>Leve & Extensível</h3>
        <p class="muted">Projetado para crescer com módulos.</p>
      </div>
    </div>
  </section>

  <section id="versions" style="margin-top:28px">
    <h2>Versões</h2>
    <div style="display:flex;gap:16px;flex-wrap:wrap;margin-top:12px">
      <div class="card" style="flex:1;min-width:260px"><h4>1 — Python-like (ATUAL)</h4><p class="muted">Fácil e didática.</p></div>
      <div class="card" style="flex:1;min-width:260px"><h4>2 — C++-like (FUTURA)</h4><p class="muted">Performance após maturação.</p></div>
    </div>
  </section>

  <section id="example" style="margin-top:28px">
    <h2>Exemplo</h2>
    <div class="code" style="margin-top:12px">
let nome = ler="Qual seu nome?"
const idade = ler="Qual sua idade?", numero
let status = "ativo"
const pais = "Brasil"
impri("nome, idade, status, pais")
    </div>
  </section>

  <section id="download" style="margin-top:28px">
    <h2>Download</h2>
    <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:12px;align-items:flex-start">
      <div style="flex:1;min-width:240px">
        <p class="muted">Disponível apenas para Linux/PC. Faça o download do release no GitHub (substituir link quando pronto).</p>
        <div style="margin-top:10px;display:flex;gap:10px;flex-wrap:wrap">
          <a class="btn ripple" id="dlLinux">Download Linux / PC</a>
          <a class="btn-outline ripple" href="#versions">Roadmap</a>
        </div>
      </div>
      <div style="min-width:240px"><div class="card"><h4>Instalação</h4><p class="muted">Ex: node bzuk.js exemplo.bz — veja README no repositório.</p></div></div>
    </div>
  </section>

  <section id="contact" style="margin-top:28px">
    <h2>Contato</h2>
    <div style="display:flex;gap:14px;align-items:center;flex-wrap:wrap;margin-top:12px">
      <a class="btn-discord btn" href="https://discord.gg/A3aMaYaQjh" target="_blank">Discord</a>
      <a class="btn-outline" href="https://github.com/Emperordeath" target="_blank">GitHub</a>
    </div>
  </section>

  <footer class="footer" style="margin-top:40px">
    © <span id="year"></span> BZuk — Beta Alfa • Linux/PC
  </footer>
</main>

<!-- ======================== Scripts ======================== -->
<script>
/* ================= CONFIG =================
 - Arquivo pesado por design: shader WebGL, three.js particles, GSAP, Lenis, Lottie, tilt.
 - Botão "Modo leve" (heavy-toggle) alterna efeitos.
 - Cursor avançado integrado (dot+ring) adicionado ao fim do documento.
================================================= */

document.getElementById('year').textContent = new Date().getFullYear();

/* preferences / heuristics */
const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
const deviceMemory = navigator.deviceMemory || 4;
let heavyEnabled = true;

/* heavy toggle */
const heavyBtn = document.getElementById('heavy-toggle');
function setMode(heavy){ heavyEnabled = !!heavy; heavyBtn.textContent = heavyEnabled ? 'Modo leve' : 'Modo pesado'; try{ localStorage.setItem('bzuk_heavy', heavyEnabled ? '1' : '0'); }catch(e){} updateEffects(); }
heavyBtn.addEventListener('click', ()=> setMode(!heavyEnabled));
try{ const stored = localStorage.getItem('bzuk_heavy'); if(stored==='0') heavyEnabled=false; } catch(e){}
if(prefersReduced || deviceMemory < 1.5) heavyEnabled = false;

/* Lenis smooth scrolling */
let lenis = null;
function initLenis(){
  if(!heavyEnabled) return;
  if(window._lenis) { lenis = window._lenis; return; }
  try{
    lenis = new Lenis({ duration:1.2, easing: t => Math.min(1, 1.001 - Math.pow(2, -10 * t)), smoothWheel:true });
    window._lenis = lenis;
    function raf(time){ lenis.raf(time); requestAnimationFrame(raf); }
    requestAnimationFrame(raf);
  }catch(e){ console.warn('Lenis failed', e); }
}

/* GSAP ScrollTriggers */
function initGsap(){
  if(!heavyEnabled) return;
  if(typeof gsap === 'undefined') return;
  gsap.registerPlugin(ScrollTrigger);
  document.querySelectorAll('section, .card, .preview').forEach((el, i) => {
    gsap.fromTo(el, { autoAlpha:0, y:30 }, {
      autoAlpha:1, y:0, duration:0.9, ease:'power3.out',
      scrollTrigger: { trigger: el, start: 'top 88%', toggleActions: 'play none none none' },
      delay: i*0.03
    });
  });
}

/* WebGL shader background */
let glCanvas, gl, shaderProgram, startTime = performance.now();
function initGL(){
  if(!heavyEnabled) return;
  glCanvas = document.getElementById('gl');
  try{ gl = glCanvas.getContext('webgl2') || glCanvas.getContext('webgl') || glCanvas.getContext('experimental-webgl'); }catch(e){ gl = null; }
  if(!gl){ console.warn('WebGL not available'); return; }

  function resize(){
    const dpr = window.devicePixelRatio || 1;
    glCanvas.width = innerWidth * dpr; glCanvas.height = innerHeight * dpr;
    glCanvas.style.width = innerWidth + 'px'; glCanvas.style.height = innerHeight + 'px';
    gl.viewport(0,0,glCanvas.width, glCanvas.height);
  }
  resize(); window.addEventListener('resize', resize);

  const vsrc = `#version 300 es
  precision highp float;
  in vec2 aPos; out vec2 vUv;
  void main(){ vUv = aPos * 0.5 + 0.5; gl_Position = vec4(aPos, 0.0, 1.0); }`;

  const fsrc = `#version 300 es
  precision highp float;
  out vec4 fragColor; in vec2 vUv;
  uniform float uTime; uniform vec2 uRes;
  float hash(vec2 p){ return fract(sin(dot(p, vec2(127.1,311.7))) * 43758.5453123); }
  float noise(vec2 p){ vec2 i = floor(p); vec2 f = fract(p); float a = hash(i), b = hash(i+vec2(1.0,0.0)); float c = hash(i+vec2(0.0,1.0)), d = hash(i+vec2(1.0,1.0)); vec2 u = f*f*(3.0-2.0*f); return mix(a,b,u.x) + (c - a)*u.y*(1.0 - u.x) + (d - b)*u.x*u.y; }
  void main(){
    vec2 p = (vUv - 0.5) * vec2(uRes.x/uRes.y, 1.0) * 1.6;
    float t = uTime * 0.25;
    float v = 0.0;
    v += sin(p.x*3.0 + t*1.2 + noise(p*1.3 + t*0.2)*2.0) * 0.6;
    v += sin(p.y*2.0 - t*0.9 + noise(p*1.8 - t*0.1)*1.2) * 0.5;
    v = v * 0.5 + 0.5;
    vec3 colA = vec3(0.01, 0.12, 0.05);
    vec3 colB = vec3(0.06, 0.14, 0.28);
    vec3 tint = mix(vec3(0.02,0.50,0.22), vec3(1.0,0.85,0.1), abs(sin(uTime*0.08)));
    vec3 color = mix(colA, colB, v);
    color = mix(color, tint, 0.18 * (0.5 + 0.5 * sin(uTime*0.6 + p.x*3.0)));
    fragColor = vec4(color, 0.95);
  }`;

  function compile(src, type){
    const s = gl.createShader(type); gl.shaderSource(s, src); gl.compileShader(s);
    if(!gl.getShaderParameter(s, gl.COMPILE_STATUS)){ console.error(gl.getShaderInfoLog(s)); return null; } return s;
  }
  const vs = compile(vsrc, gl.VERTEX_SHADER), fs = compile(fsrc, gl.FRAGMENT_SHADER);
  if(!vs || !fs) return;
  shaderProgram = gl.createProgram(); gl.attachShader(shaderProgram, vs); gl.attachShader(shaderProgram, fs);
  gl.bindAttribLocation(shaderProgram, 0, 'aPos'); gl.linkProgram(shaderProgram);
  if(!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)){ console.error(gl.getProgramInfoLog(shaderProgram)); return; }
  const vao = gl.createVertexArray(); gl.bindVertexArray(vao);
  const vbo = gl.createBuffer(); gl.bindBuffer(gl.ARRAY_BUFFER, vbo);
  const verts = new Float32Array([-1,-1,  1,-1,  -1,1,  1,1]);
  gl.bufferData(gl.ARRAY_BUFFER, verts, gl.STATIC_DRAW);
  gl.enableVertexAttribArray(0); gl.vertexAttribPointer(0,2,gl.FLOAT,false,0,0);
  gl.useProgram(shaderProgram);
  const uTime = gl.getUniformLocation(shaderProgram,'uTime');
  const uRes = gl.getUniformLocation(shaderProgram,'uRes');

  function render(now){
    if(!heavyEnabled) return;
    const t = (now - startTime) * 0.001;
    gl.useProgram(shaderProgram);
    gl.uniform1f(uTime, t);
    gl.uniform2f(uRes, glCanvas.width, glCanvas.height);
    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
    requestAnimationFrame(render);
  }
  requestAnimationFrame(render);
}

/* Particles (three.js) */
let renderer3, partScene, camera3, particlesPoints;
function initParticles(){
  if(!heavyEnabled) return;
  const canvas = document.getElementById('particles');
  const dpr = window.devicePixelRatio || 1;
  canvas.width = innerWidth * dpr; canvas.height = innerHeight * dpr; canvas.style.width = innerWidth + 'px'; canvas.style.height = innerHeight + 'px';
  renderer3 = new THREE.WebGLRenderer({ canvas: canvas, alpha:true, antialias:true });
  renderer3.setPixelRatio(dpr);
  renderer3.setSize(innerWidth, innerHeight);
  partScene = new THREE.Scene();
  camera3 = new THREE.PerspectiveCamera(45, innerWidth/innerHeight, 0.1, 1000);
  camera3.position.z = 120;

  const geometry = new THREE.BufferGeometry();
  const COUNT = (innerWidth < 900) ? 700 : 1400;
  const positions = new Float32Array(COUNT * 3);
  for(let i=0;i<COUNT;i++){
    positions[i*3] = (Math.random()-0.5) * 400;
    positions[i*3+1] = (Math.random()-0.5) * 200;
    positions[i*3+2] = (Math.random()-0.5) * 400;
  }
  geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
  const material = new THREE.PointsMaterial({ color:0xBFE9FF, size:1.8, transparent:true, opacity:0.22 });
  particlesPoints = new THREE.Points(geometry, material);
  partScene.add(particlesPoints);

  function onResize(){
    const dpr = window.devicePixelRatio || 1;
    renderer3.setPixelRatio(dpr);
    renderer3.setSize(innerWidth, innerHeight);
    camera3.aspect = innerWidth/innerHeight; camera3.updateProjectionMatrix();
  }
  window.addEventListener('resize', onResize);

  function animate(){
    if(!heavyEnabled) return;
    particlesPoints.rotation.y += 0.0008;
    particlesPoints.rotation.x += 0.0004;
    renderer3.render(partScene, camera3);
    requestAnimationFrame(animate);
  }
  requestAnimationFrame(animate);
}

/* UI: tilt, ripple (no cursor creation here — cursor module is appended separately) */
function initUI(){
  if(!heavyEnabled) return;
  // tilt via VanillaTilt
  try{
    document.querySelectorAll('[data-tilt]').forEach(el=>{
      VanillaTilt.init(el, { max:12, scale:1.03, speed:400, glare:true, "max-glare":0.12 });
    });
  }catch(e){ console.warn('tilt fail', e); }

  // ripple
  document.querySelectorAll('.ripple').forEach(btn=>{
    btn.style.position='relative';
    btn.addEventListener('click', e=>{
      const r = btn.getBoundingClientRect();
      const span = document.createElement('span');
      const size = Math.max(r.width,r.height)*1.8;
      span.style.width = span.style.height = size + 'px';
      span.style.position = 'absolute';
      span.style.left = (e.clientX - r.left - size/2) + 'px';
      span.style.top  = (e.clientY - r.top - size/2) + 'px';
      span.style.background = 'rgba(255,255,255,0.06)';
      span.style.borderRadius='50%';
      span.style.transform='scale(0)'; span.style.transition='transform .7s var(--ease), opacity .7s var(--ease)';
      span.style.pointerEvents = 'none';
      btn.appendChild(span);
      requestAnimationFrame(()=> span.style.transform='scale(1)');
      setTimeout(()=> span.style.opacity='0', 380);
      setTimeout(()=> { try{ btn.removeChild(span); }catch(e){} }, 900);
    });
  });
}

/* typed code */
function initTyping(){
  const el = document.getElementById('codeBlock');
  if(!el) return;
  const text = el.textContent.trim();
  el.textContent = '';
  let i=0; let cursor=true;
  function step(){
    if(i<=text.length){
      el.textContent = text.slice(0,i) + (cursor ? '▌' : '');
      i++;
      let delay = 12 + Math.random()*10;
      if(text[i]==='\n') delay = 60;
      if(text[i]==='.' || text[i]==='!') delay += 40;
      setTimeout(step, delay);
    } else {
      setInterval(()=> { cursor = !cursor; el.textContent = text + (cursor? '▌' : ''); }, 500);
    }
  }
  setTimeout(step, 700);
}

/* update effects (enable/disable heavy modules) */
function updateEffects(){
  if(heavyEnabled){
    // start modules
    initLenis();
    initGsap();
    initGL(); initParticles();
    initUI(); initTyping();
  } else {
    // disable: hide canvases and remove heavy UI
    const g = document.getElementById('gl'); if(g) g.style.display='none';
    const p = document.getElementById('particles'); if(p) p.style.display='none';
    const cur = document.getElementById('bzuk-cursor-dot'); if(cur) {/* leave cursor module manage itself */ }
    document.querySelectorAll('section, .card, .preview').forEach(el => { el.style.opacity=1; el.style.transform='none'; });
  }
}

/* initial run */
updateEffects();

/* heavy toggle quick handler (also persisted) */
function toggleMode(){
  heavyEnabled = !heavyEnabled;
  try{ localStorage.setItem('bzuk_heavy', heavyEnabled ? '1' : '0'); }catch(e){}
  if(!heavyEnabled){
    const g = document.getElementById('gl'); if(g) g.style.display='none';
    const p = document.getElementById('particles'); if(p) p.style.display='none';
    const cur = document.getElementById('bzuk-cursor-dot'); if(cur) {/* keep cursor visible */ }
    heavyBtn.textContent = 'Modo pesado';
  } else {
    const g = document.getElementById('gl'); if(g) g.style.display='block';
    const p = document.getElementById('particles'); if(p) p.style.display='block';
    initLenis(); initGsap(); initGL(); initParticles(); initUI(); initTyping();
    heavyBtn.textContent = 'Modo leve';
  }
}
heavyBtn.addEventListener('click', toggleMode);

/* safety: don't auto-enable heavy on very weak devices */
if(prefersReduced || deviceMemory < 1.2){ heavyEnabled = false; const g = document.getElementById('gl'); if(g) g.style.display='none'; const p = document.getElementById('particles'); if(p) p.style.display='none'; }

/* sample actions for download buttons */
document.getElementById('downloadBtn').addEventListener('click', ()=> alert('espere ainda nao esta disponivel.'));
document.getElementById('dlLinux').addEventListener('click', ()=> alert('Espere a versao ainda sera lançada.'));
</script>

<!-- ======================== Advanced Cursor Module (dot + ring) ======================== -->
<script>
/* BZUK — advanced custom cursor module
   - Smooth lerp following with ring lag
   - Hover scaling for interactive elements
   - Click pulse
   - Auto-disable on touch / reduced-motion
   - Integrated with site (Brazil tint)
*/
(function(){
  const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  if(prefersReduced) return;

  // remove older nodes if exist (cleanup)
  ['bzuk-cursor-dot','bzuk-cursor-ring','custom-cursor'].forEach(id=>{
    const el = document.getElementById(id); if(el) el.remove();
  });

  // create elements
  const dot = document.createElement('div'); dot.id = 'bzuk-cursor-dot';
  const ring = document.createElement('div'); ring.id = 'bzuk-cursor-ring';
  document.body.appendChild(ring); document.body.appendChild(dot);

  let mouseX = window.innerWidth/2, mouseY = window.innerHeight/2;
  let currentX = mouseX, currentY = mouseY;
  let lastMoveAt = performance.now();

  const ease = 0.18; // smoothing factor - balanced
  const interactiveSelector = 'a, button, input, textarea, .ripple, .ripple-el, .btn, .btn-discord, .social-btn, .menu-link';
  let isHovering = false;

  function onMove(e){
    mouseX = e.clientX; mouseY = e.clientY;
    lastMoveAt = performance.now();
    dot.style.opacity = '1'; ring.style.opacity = '0.95';
  }

  function onEnterInteractive(){
    isHovering = true;
    ring.classList.add('bzuk-cursor--hover-ring');
    dot.classList.add('bzuk-cursor--hover-dot');
  }
  function onLeaveInteractive(){
    isHovering = false;
    ring.classList.remove('bzuk-cursor--hover-ring');
    dot.classList.remove('bzuk-cursor--hover-dot');
  }

  function onPointerDown(e){
    const pulse = ring.cloneNode(true);
    pulse.classList.add('bzuk-cursor-pulse');
    pulse.style.pointerEvents = 'none';
    pulse.style.position = 'fixed';
    pulse.style.left = (mouseX) + 'px';
    pulse.style.top = (mouseY) + 'px';
    pulse.style.transform = 'translate3d(-50%,-50%,0)';
    pulse.style.zIndex = 9999998;
    document.body.appendChild(pulse);
    setTimeout(()=> { try{ pulse.remove(); } catch(e){} }, 520);
  }

  function onLeaveWindow(){
    dot.style.opacity = '0'; ring.style.opacity = '0';
  }

  // touch: remove cursor
  function onFirstTouch(){
    try{ dot.remove(); ring.remove(); }catch(e){}
    window.removeEventListener('touchstart', onFirstTouch);
    window.removeEventListener('mousemove', onMove);
    window.removeEventListener('pointerdown', onPointerDown);
    window.removeEventListener('mouseleave', onLeaveWindow);
    document.querySelectorAll(interactiveSelector).forEach(el=>{
      el.removeEventListener('pointerenter', onEnterInteractive);
      el.removeEventListener('pointerleave', onLeaveInteractive);
    });
  }
  window.addEventListener('touchstart', onFirstTouch, { once:true, passive:true });

  window.addEventListener('mousemove', onMove, { passive:true });
  window.addEventListener('pointerdown', onPointerDown);
  window.addEventListener('mouseleave', onLeaveWindow);

  // Bind interactive elements (and observe future additions)
  function bindInteractive(){
    document.querySelectorAll(interactiveSelector).forEach(el=>{
      if(el.__bzukCursorBound) return;
      el.__bzukCursorBound = true;
      el.addEventListener('pointerenter', onEnterInteractive);
      el.addEventListener('pointerleave', onLeaveInteractive);
      el.addEventListener('focus', onEnterInteractive);
      el.addEventListener('blur', onLeaveInteractive);
    });
  }
  bindInteractive();
  const obs = new MutationObserver(()=> bindInteractive());
  obs.observe(document.body, { childList:true, subtree:true });

  // main smooth loop
  function rafLoop(){
    currentX += (mouseX - currentX) * ease;
    currentY += (mouseY - currentY) * ease;
    const ringX = currentX + (mouseX - currentX) * 0.08;
    const ringY = currentY + (mouseY - currentY) * 0.08;

    // use translate3d for GPU acceleration
    dot.style.transform = `translate3d(${currentX}px, ${currentY}px, 0) translate(-50%,-50%)`;
    ring.style.transform = `translate3d(${ringX}px, ${ringY}px, 0) translate(-50%,-50%)`;

    // idle fade
    const idleMs = performance.now() - lastMoveAt;
    if(idleMs > 2200){
      dot.style.opacity = '0.7';
      ring.style.opacity = '0.55';
    } else {
      dot.style.opacity = '1';
      ring.style.opacity = '0.95';
    }

    requestAnimationFrame(rafLoop);
  }
  requestAnimationFrame(rafLoop);

  // keyboard accessibility: hide when tabbing
  function onKeydown(e){
    if(e.key === 'Tab'){ dot.style.opacity = '0'; ring.style.opacity = '0'; }
  }
  window.addEventListener('keydown', onKeydown);

  // small-screen / touch safety
  if(('ontouchstart' in window) || navigator.maxTouchPoints > 0 || window.innerWidth < 700){
    setTimeout(()=> { try{ dot.remove(); ring.remove(); } catch(e){} }, 80);
  }

  // expose for debug
  window._bzukCursor = { dot, ring, enable: () => { document.body.appendChild(ring); document.body.appendChild(dot); }, disable: () => { try{ dot.remove(); ring.remove(); } catch(e){} } };
})();
</script>

</body>
</html>

